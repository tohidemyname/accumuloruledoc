<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_152) on Mon Mar 04 14:04:57 CST 2019 -->
<title>LruBlockCache</title>
<meta name="date" content="2019-03-04">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LruBlockCache";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html" target="_top">Frames</a></li>
<li><a href="LruBlockCache.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.accumulo.core.file.blockfile.cache</div>
<h2 title="Class LruBlockCache" class="title">Class LruBlockCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.accumulo.core.file.blockfile.cache.LruBlockCache</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a>, <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">HeapSize</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">LruBlockCache</span>
extends java.lang.Object
implements <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a>, <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">HeapSize</a></pre>
<div class="block">A block cache implementation that is memory-aware using <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache"><code>HeapSize</code></a>, memory-bound using an
 LRU eviction algorithm, and concurrent: backed by a <code>ConcurrentHashMap</code> and with a
 non-blocking eviction thread giving constant-time <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#cacheBlock-java.lang.String-byte:A-boolean-"><code>cacheBlock(java.lang.String, byte[], boolean)</code></a> and <a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getBlock-java.lang.String-"><code>getBlock(java.lang.String)</code></a>
 operations.

 <p>
 Contains three levels of block priority to allow for scan-resistance and in-memory families. A
 block is added with an inMemory flag if necessary, otherwise a block becomes a single access
 priority. Once a blocked is accessed again, it changes to multiple access. This is used to
 prevent scans from thrashing the cache, adding a least-frequently-used element to the eviction
 algorithm.

 <p>
 Each priority is given its own chunk of the total cache to ensure fairness during eviction. Each
 priority will retain close to its maximum size, however, if any priority is not using its entire
 chunk the others are able to grow beyond their chunk size.

 <p>
 Instantiated at a minimum with the total size and average block size. All sizes are in bytes. The
 block size is not especially important as this cache is fully dynamic in its sizing of blocks. It
 is only used for pre-allocating data structures and in initial heap estimation of the map.

 <p>
 The detailed constructor defines the sizes for the three priorities (they should total to the
 maximum size defined). It also sets the levels that trigger and control the eviction thread.

 <p>
 The acceptable size is the cache size level which triggers the eviction process to start. It
 evicts enough blocks to get the size below the minimum size specified.

 <p>
 Eviction happens in a separate thread and involves a single full-scan of the map. It determines
 how many bytes must be freed to reach the minimum size, and then while scanning determines the
 fewest least-recently-used blocks necessary from each of the three priorities (would be 3 times
 bytes to free). It then uses the priority chunk sizes to evict fairly according to the relative
 sizes and usage.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache">LruBlockCache.CacheStats</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#CACHE_FIXED_OVERHEAD">CACHE_FIXED_OVERHEAD</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#LruBlockCache-long-long-">LruBlockCache</a></span>(long&nbsp;maxSize,
             long&nbsp;blockSize)</code>
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#LruBlockCache-long-long-boolean-">LruBlockCache</a></span>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread)</code>
<div class="block">Constructor used for testing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#LruBlockCache-long-long-boolean-int-float-int-float-float-float-float-float-">LruBlockCache</a></span>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             int&nbsp;mapInitialSize,
             float&nbsp;mapLoadFactor,
             int&nbsp;mapConcurrencyLevel,
             float&nbsp;minFactor,
             float&nbsp;acceptableFactor,
             float&nbsp;singleFactor,
             float&nbsp;multiFactor,
             float&nbsp;memoryFactor)</code>
<div class="block">Configurable constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#cacheBlock-java.lang.String-byte:A-">cacheBlock</a></span>(java.lang.String&nbsp;blockName,
          byte[]&nbsp;buf)</code>
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#cacheBlock-java.lang.String-byte:A-boolean-">cacheBlock</a></span>(java.lang.String&nbsp;blockName,
          byte[]&nbsp;buf,
          boolean&nbsp;inMemory)</code>
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#calculateOverhead-long-long-int-">calculateOverhead</a></span>(long&nbsp;maxSize,
                 long&nbsp;blockSize,
                 int&nbsp;concurrency)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#evictBlock-org.apache.accumulo.core.file.blockfile.cache.CachedBlock-">evictBlock</a></span>(<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getBlock-java.lang.String-">getBlock</a></span>(java.lang.String&nbsp;blockName)</code>
<div class="block">Get the buffer of the block with the specified name.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getCurrentSize--">getCurrentSize</a></span>()</code>
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getEvictedCount--">getEvictedCount</a></span>()</code>
<div class="block">Get the number of blocks that have been evicted during the lifetime of this cache.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getEvictionCount--">getEvictionCount</a></span>()</code>
<div class="block">Get the number of eviction runs that have occurred</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getFreeSize--">getFreeSize</a></span>()</code>
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getMaxSize--">getMaxSize</a></span>()</code>
<div class="block">Get the maximum size of this cache.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache">LruBlockCache.CacheStats</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#getStats--">getStats</a></span>()</code>
<div class="block">Get counter statistics for this cache.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#heapSize--">heapSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#logStats--">logStats</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#setMaxSize-long-">setMaxSize</a></span>(long&nbsp;maxSize)</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#shutdown--">shutdown</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html#size--">size</a></span>()</code>
<div class="block">Get the size of this cache (number of cached blocks)</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CACHE_FIXED_OVERHEAD">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CACHE_FIXED_OVERHEAD</h4>
<pre>public static final&nbsp;long CACHE_FIXED_OVERHEAD</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LruBlockCache-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
                     long&nbsp;blockSize)</pre>
<div class="block">Default constructor. Specify maximum size and expected average block size (approximation is
 fine).

 <p>
 All other factors will be calculated based on defaults specified in this class.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxSize</code> - maximum size of cache, in bytes</dd>
<dd><code>blockSize</code> - approximate size of each block, in bytes</dd>
</dl>
</li>
</ul>
<a name="LruBlockCache-long-long-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
                     long&nbsp;blockSize,
                     boolean&nbsp;evictionThread)</pre>
<div class="block">Constructor used for testing. Allows disabling of the eviction thread.</div>
</li>
</ul>
<a name="LruBlockCache-long-long-boolean-int-float-int-float-float-float-float-float-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
                     long&nbsp;blockSize,
                     boolean&nbsp;evictionThread,
                     int&nbsp;mapInitialSize,
                     float&nbsp;mapLoadFactor,
                     int&nbsp;mapConcurrencyLevel,
                     float&nbsp;minFactor,
                     float&nbsp;acceptableFactor,
                     float&nbsp;singleFactor,
                     float&nbsp;multiFactor,
                     float&nbsp;memoryFactor)</pre>
<div class="block">Configurable constructor. Use this constructor if not using defaults.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxSize</code> - maximum size of this cache, in bytes</dd>
<dd><code>blockSize</code> - expected average size of blocks, in bytes</dd>
<dd><code>evictionThread</code> - whether to run evictions in a bg thread or not</dd>
<dd><code>mapInitialSize</code> - initial size of backing ConcurrentHashMap</dd>
<dd><code>mapLoadFactor</code> - initial load factor of backing ConcurrentHashMap</dd>
<dd><code>mapConcurrencyLevel</code> - initial concurrency factor for backing CHM</dd>
<dd><code>minFactor</code> - percentage of total size that eviction will evict until</dd>
<dd><code>acceptableFactor</code> - percentage of total size that triggers eviction</dd>
<dd><code>singleFactor</code> - percentage of total size for single-access blocks</dd>
<dd><code>multiFactor</code> - percentage of total size for multiple-access blocks</dd>
<dd><code>memoryFactor</code> - percentage of total size for in-memory blocks</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setMaxSize-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxSize</h4>
<pre>public&nbsp;void&nbsp;setMaxSize(long&nbsp;maxSize)</pre>
</li>
</ul>
<a name="cacheBlock-java.lang.String-byte:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a>&nbsp;cacheBlock(java.lang.String&nbsp;blockName,
                             byte[]&nbsp;buf,
                             boolean&nbsp;inMemory)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block. If that is done, it is
 assumed that you are reinserting the same exact block due to a race condition and will update
 the buffer but not modify the size of the cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#cacheBlock-java.lang.String-byte:A-boolean-">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockName</code> - block name</dd>
<dd><code>buf</code> - block buffer</dd>
<dd><code>inMemory</code> - if block is in-memory</dd>
</dl>
</li>
</ul>
<a name="cacheBlock-java.lang.String-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">CacheEntry</a>&nbsp;cacheBlock(java.lang.String&nbsp;blockName,
                             byte[]&nbsp;buf)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block. If that is done, it is
 assumed that you are reinserting the same exact block due to a race condition and will update
 the buffer but not modify the size of the cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#cacheBlock-java.lang.String-byte:A-">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockName</code> - block name</dd>
<dd><code>buf</code> - block buffer</dd>
</dl>
</li>
</ul>
<a name="getBlock-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a>&nbsp;getBlock(java.lang.String&nbsp;blockName)</pre>
<div class="block">Get the buffer of the block with the specified name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#getBlock-java.lang.String-">getBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockName</code> - block name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>buffer of specified block name, or null if not in cache</dd>
</dl>
</li>
</ul>
<a name="evictBlock-org.apache.accumulo.core.file.blockfile.cache.CachedBlock-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evictBlock</h4>
<pre>protected&nbsp;long&nbsp;evictBlock(<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache">CachedBlock</a>&nbsp;block)</pre>
</li>
</ul>
<a name="getMaxSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSize</h4>
<pre>public&nbsp;long&nbsp;getMaxSize()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#getMaxSize--">BlockCache</a></code></span></div>
<div class="block">Get the maximum size of this cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html#getMaxSize--">getMaxSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/BlockCache.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">BlockCache</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>max size in bytes</dd>
</dl>
</li>
</ul>
<a name="getCurrentSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSize</h4>
<pre>public&nbsp;long&nbsp;getCurrentSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>current size in bytes</dd>
</dl>
</li>
</ul>
<a name="getFreeSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSize</h4>
<pre>public&nbsp;long&nbsp;getFreeSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>current size in bytes</dd>
</dl>
</li>
</ul>
<a name="size--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;long&nbsp;size()</pre>
<div class="block">Get the size of this cache (number of cached blocks)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of cached blocks</dd>
</dl>
</li>
</ul>
<a name="getEvictionCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictionCount</h4>
<pre>public&nbsp;long&nbsp;getEvictionCount()</pre>
<div class="block">Get the number of eviction runs that have occurred</div>
</li>
</ul>
<a name="getEvictedCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictedCount</h4>
<pre>public&nbsp;long&nbsp;getEvictedCount()</pre>
<div class="block">Get the number of blocks that have been evicted during the lifetime of this cache.</div>
</li>
</ul>
<a name="logStats--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStats</h4>
<pre>public&nbsp;void&nbsp;logStats()</pre>
</li>
</ul>
<a name="getStats--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre>public&nbsp;<a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache">LruBlockCache.CacheStats</a>&nbsp;getStats()</pre>
<div class="block">Get counter statistics for this cache.

 <p>
 Includes: total accesses, hits, misses, evicted blocks, and runs of the eviction processes.</div>
</li>
</ul>
<a name="heapSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapSize</h4>
<pre>public&nbsp;long&nbsp;heapSize()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html#heapSize--">heapSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache">HeapSize</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Approximate 'exclusive deep size' of implementing object. Includes count of payload and
         hosting object sizings.</dd>
</dl>
</li>
</ul>
<a name="calculateOverhead-long-long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateOverhead</h4>
<pre>public static&nbsp;long&nbsp;calculateOverhead(long&nbsp;maxSize,
                                     long&nbsp;blockSize,
                                     int&nbsp;concurrency)</pre>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/accumulo/core/file/blockfile/cache/LruBlockCache.html" target="_top">Frames</a></li>
<li><a href="LruBlockCache.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
